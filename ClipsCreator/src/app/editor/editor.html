<div class="editor-container">
  <div class="file-selection">
    <div class="file-input-group">
      <label for="video-input">Select Video File:</label>
      <input type="file" id="video-input" accept="video/*" (change)="onVideoSelected($event)" />
    </div>
    <div class="file-input-group">
      <label for="audio-input">Select Audio Files:</label>
      <input type="file" id="audio-input" accept="audio/*" multiple (change)="onAudioSelected($event)" />
    </div>
  </div>

  <div class="preview-container">
    <div class="preview">
      <video #videoElement id="video-player" *ngIf="selectedVideo"></video>
      <div class="no-video" *ngIf="!selectedVideo">Select a video file to start editing</div>
    </div>

    <div class="custom-controls" *ngIf="selectedVideo">
      <button class="control-btn play-pause-btn" (click)="togglePlayPause()">
        <span *ngIf="!isPlaying">â–¶ï¸</span>
        <span *ngIf="isPlaying">â¸ï¸</span>
      </button>

      <div class="seek-container">
        <input type="range"
               class="seek-bar"
               [value]="currentTime"
               [max]="videoDuration"
               (input)="onSeek($event)"
               step="0.1">
      </div>

      <div class="time-display">
        {{ formatTime(currentTime) }} / {{ formatTime(videoDuration) }}
      </div>

      <div class="volume-container">
        <button class="control-btn volume-btn" (click)="toggleMute()">
          <span *ngIf="volume > 0 && !isMuted">ğŸ”Š</span>
          <span *ngIf="volume === 0 || isMuted">ğŸ”‡</span>
        </button>
        <input type="range"
               class="volume-bar"
               [value]="isMuted ? 0 : volume"
               [max]="1"
               [step]="0.1"
               (input)="onVolumeChange($event)">
      </div>
    </div>
  </div>

  <div class="timeline-container">
    <div class="timeline-header">
      <div class="time-markers">
        <span class="time-marker" *ngFor="let time of timeMarkers">{{ time }}</span>
      </div>
    </div>

    <div class="tracks-container">
      <div class="playhead-overlay">
        <div class="playhead" [style.left.%]="playheadPosition"></div>
      </div>
      <div class="track video-track" *ngIf="selectedVideo">
        <div class="track-header">
          <span class="track-label">ğŸ¥ Video</span>
          <span class="track-info">{{ selectedVideo.name }}</span>
        </div>
        <div class="track-waveform">
          <canvas #videoCanvas class="waveform-canvas" width="1200" height="60"></canvas>
        </div>
      </div>

      <div class="track audio-track" *ngFor="let audio of selectedAudios; let i = index" [class.ended]="audioEnded[i]">
        <div class="track-header">
          <span class="track-label">
            ğŸµ Audio {{ i + 1 }}
            <span class="track-status" *ngIf="audioEnded[i]">(Ended)</span>
          </span>
          <span class="track-info">{{ audio.name }}</span>
          <div class="track-controls">
            <button class="mute-btn" [class.muted]="mutedTracks[i]" (click)="toggleAudioMute(i)">
              {{ mutedTracks[i] ? 'ğŸ”‡' : 'ğŸ”Š' }}
            </button>
            <button class="remove-track" (click)="removeAudioTrack(i)">Ã—</button>
          </div>
        </div>
        <div class="track-waveform">
          <canvas #audioCanvas class="waveform-canvas" width="1200" height="60"></canvas>
        </div>
      </div>

      <div class="no-tracks" *ngIf="!selectedVideo && selectedAudios.length === 0">
        No tracks loaded - Select video and audio files to start editing
      </div>
    </div>
  </div>
</div>
